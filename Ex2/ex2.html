<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>EXERCICI 1</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="ex2.html">
</head>

<body>
    <div id="buscador">
        <div class="input_area">
            <label for="genero">Genre: </label>
            <input type="text" id="genre" name="genre">
        </div>
        <div class="input_area">
            <label for="genero">Year: </label>
            <input type="text" id="year" name="year">
        </div>
        <button id="buscar">Search</button>
    </div>
    <div id="movies">
    </div>

    <script>
        $(document).ready(function () {
            //button evento
            $("#buscar").click(function () {
                let genre = $("#genre option:selected").text();
                let year = $("#year option:selected").text();
                console.log(genre + ", " + year);
                $.ajax({
                    url: "./datos.json",
                    dataType: "json",
                    success: function (data) {
                        var info = "<table><tr><th></th><th>Titulo</th><th>Genero</th><th>Director</th>"
                        info += "<th>Lanzamiento</th><th>Duracion</th><th>Sinopsis</th></tr>";
                        for (var i = 0; i < data.pelicula.length; i++) {
                            if ((genre == data.pelicula[i].Genero && year == data.pelicula[i].Year) || (year=="All" && genre == data.pelicula[i].Genero) 
                            || (genre=="All" && year == data.pelicula[i].Year) || (genre == "All" && year == "All")) {
                                info += "<tr><td><img class='poster' src='img/" + data.pelicula[i].foto + ".jpg'>   </td>";
                                info += "<td>" + data.pelicula[i].Titulo + "</td>";
                                info += "<td>" + data.pelicula[i].Genero + "</td>";
                                info += "<td>" + data.pelicula[i].Director + "</td>";
                                info += "<td>" + data.pelicula[i].Year + "</td>";
                                info += "<td>" + data.pelicula[i].Duracion + "</td>";
                                info += "<td id='sinopsis'>" + data.pelicula[i].Sinopsis + "</td>";
                                info += "</tr>";
                            }
                            // info += 
                        }

                        info += "</table>"
                        $("#movies").html(info);
                    }
                });
            });
        });
    </script>
</body>

</html>